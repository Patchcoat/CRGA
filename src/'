/*
 * =====================================================================================
 *
 *       Filename:  crga.h
 *
 *    Description: All of the functions exposed by the API 
 *
 *        Version:  1.0
 *        Created:  01/15/2023 02:48:08 PM
 *       Revision:  none
 *       Compiler:  gcc
 *
 *         Author:  Spencer Welch
 *   Organization:  BYU-I
 *
 * =====================================================================================
 */

#ifndef CRGA_HEADER
#define CRGA_HEADER

#include <raylib.h>
#include <stdlib.h>

#define GRID_OUTLINE 1

typedef struct {
    short *tiles;
    int width;
    int height;
    Vector2 position;
} CRLayer;

typedef struct {
    int window_width;
    int window_height;
    int fps;
    char *title;

    CRLayer *world_layers;
    size_t world_layer_count;
    CRLayer *ui_layers;
    size_t ui_layer_count;

    Camera2D main_camera;

    float tile_size;

    Font *fonts;
    size_t font_count;

    void (*pre_draw_function)();
} CRConfig;

// Init
void CRInit();
void CRInitConfig();
void CRInitWindow();

// Cleanup Functions
void CRClose();
void CRUnloadLayers();
void CRUnloadFonts();

// Drawing Loop
void CRSetPredrawFunction(void (*pre_draw)());
void CRLoop();

// Font Loading
void CRLoadFont(const char *font_path);
void CRLoadFontSize(const char *font_path, int size);

// Tile Rendering
void CRFillTiles(short *grid, short value, int height, int width);
void CRSetTiles(short *grid, int width, int height);
void CRSetTilesOnLayer(short *grid, int layer, int width, int height);
void CRDrawTiles();

// Camera functions
Camera2D *CRGetMainCamera();
void CRSetCameraTarget(Camera2D *camera, Vector2 target);
void CRSetCameraOffset(Camera2D *camera, Vector2 offset);
void CRShiftCameraTarget(Camera2D *camera, Vector2 target);
void CRShiftCameraOffset(Camera2D *camera, Vector2 offset);

#endif
